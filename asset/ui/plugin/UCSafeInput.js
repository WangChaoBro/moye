/*! 2015 Baidu Inc. All Rights Reserved */
define("ui/plugin/UCSafeInput",["require","jquery","../lib"],function(require){function t(t){e.extend(this,t)}var e=require("jquery"),n=require("../lib"),i="http://cas.baidu.com",r=i+"/ucsl/ucsl.js?appid=228&d="+Math.floor(+new Date/864e5);return t.prototype.execute=function(t){var i=this,a=i.target=t;a.safer=i,e.getScript(r).then(function(){if(i._support=ucsl.support(),i._support){var t=i.fid=n.getId(a,"wrapper"),r=i.wrapper=e('<div id="'+t+'">');e(a.input).replaceWith(r),e(a.main).addClass("uc-safe-input"),a.fire("beforesaferinit",{type:"beforesaferinit",target:i}),i.renderUCInput()}})},t.prototype.renderUCInput=function(){return e(this.wrapper).html(""),ucsl.init({fid:this.fid,ready:e.proxy(this._ready,this),style:{width:this.width,height:this.height}}),this},t.prototype._ready=function(){var t=this,e=t.target;t._isReady=!0,e.fire("saferready",{type:"saferready",target:t})},t.prototype.getValue=function(){var t=this,n=e("input",t.wrapper);return{sid:n[0].value,pwd:n[1].value}},t.prototype.isSupport=function(){return this._support},t.prototype.isReady=function(){return!!this._isReady},t.prototype.flyaway=function(){var t=e(this.target.main);if(!this._flyStyleCache)this._flyStyleCache={position:t.css("position"),left:t.css("left")};return t.css({position:"absolute",left:"-9999px"}),this},t.prototype.flyback=function(){var t=this._flyStyleCache;if(t)return e(this.target.main).css(this._flyStyleCache),this._flyStyleCache=null,this.reset(),this},t.prototype.validate=function(){return ucsl.verify()},t.prototype.reset=function(){return this._isReady=!1,this.renderUCInput()},t.prototype.dispose=function(){this.wrapper=null,this.target.safer=null,this.target=null},function(e){return new t(e)}});