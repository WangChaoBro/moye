/*! 2015 Baidu Inc. All Rights Reserved */
define("ui/Rating",["require","jquery","./lib","./Control"],function(require){var t=require("jquery"),e=(require("./lib"),require("./Control")),n=e.extend({options:{max:5,value:0},type:"Rating",init:function(t){this.$parent(t)},initStructure:function(){for(var t=['<ul class="'+prefix+'-stars">'],e=0;e<options.max;e++)t.push("<li ",'class="'+prefix+'-star" ','data-value="'+(e+1)+'"',">",options.skin?"":"â˜†","</li>");t.push("</ul>"),this.main.innerHTML=t.join("")},initEvents:function(){},render:function(){var e=this.options;if(!this.rendered){this.rendered=!0;var n=e.prefix,i=this._bound;this.stars=t("."+n+"-star").hover(i.onMouseOver,i.onMouseOut).on("click",i.onClick).toArray()}return privates.resetRating.call(this),this._disabled&&this.disable(),this},drain:function(){var e=this.options,n=e.prefix;t("."+n+"-star-on").removeClass(n+"-star-on")},fill:function(e){e=parseInt(e||0,10);var n=this.options,i=n.prefix,r=this.stars.slice(0,e);return t(r).addClass(i+"-star-on"),r},resetRating:function(){var e=this.options,n=e.value,i=e.prefix,r=this.stars.slice(0,n);return t(r).addClass(i+"-star-on"),r},onClick:function(e){var n=this.options,i=n.prefix,r=t(e.target),a=n.value;if(!e||this.disabled)return!1;if(r.hasClass(i+"-star")){var s=parseInt(r.attr("data-value"),10);if(s===a)return!1;n.value=s,privates.drain.call(this),privates.resetRating.call(this),this.fire("rated",{value:n.value})}},onMouseOver:function(e){var n=this.options,i=n.prefix,r=t(e.target);if(!e||this.disabled)return!1;if(r.hasClass(i+"-star"))privates.drain.call(this),privates.fill.call(this,r.attr("data-value"))},onMouseOut:function(e){var n=this.options,i=n.prefix,r=t(e.target);if(!e||this.disabled)return!1;if(r.hasClass(i+"-star"))privates.drain.call(this),privates.resetRating.call(this)},enable:function(){t(this.main).removeClass(this.options.prefix+"-disabled"),this.parent("enable")},disable:function(){t(this.main).addClass(this.options.prefix+"-disabled"),this.parent("disable")},dispose:function(){var e=this._bound;t(this.stars).off("mouseover",e.onMouseover).off("mouseout",e.onMouseout).off("click",e.onClick),delete this.stars,this.parent("dispose")}});return n});