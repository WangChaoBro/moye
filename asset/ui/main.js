/*! 2015 Baidu Inc. All Rights Reserved */
define("ui/main",["require","./lib","./Context"],function(require){var e=require("./lib"),t=require("./Context"),n={uiPrefix:"data-ui",instanceAttr:"data-ctrl-id",uiClassPrefix:"ui",skinClassPrefix:"skin",stateClassPrefix:"state",contextAttr:"data-ctrl-context"},i=t.create("default"),exports={init:function(e,t,r){var a=n.uiPrefix+"-id",o={};r=r||i,r.fill(t);for(var s=e.getElementsByTagName("*"),u=[],l=0,c=s.length;c>l;l++)if(1===s[l].nodeType)u.push(s[l]);for(l=0,c=u.length;c>l;l++){var f=u[l],h=f.getAttribute(a),d=f.getAttribute(n.instanceAttr);if(h&&!d){var p=t[h];if(p){var g=p.type;if(g){var m=$.extend({context:r},p,{id:h,main:f}),v=exports.create(g,m);if(v)try{v.render(),o[h]=v}catch(y){var b=new Error('Render control "'+(v.id||"anonymous")+'" of type '+v.type+" failed because: "+y.message);throw b.actualError=y,b}else;}else;}else;}else;}return o},create:function(t,n){var i=e.getClass(t);if(!i)return null;else return delete n.type,new i(n)},get:function(e){return i.get(e)},getControlByDOM:function(e){e=$(e);var t=e.attr(n.instanceAttr);if(!t)return null;var i=e.attr(n.contextAttr);if(!i)return null;var r=exports.getContext(i);return r?r.get(t):null},getContext:function(e){return e?t.get(e):i},getConfig:function(e){return n[e]},setConfig:function(e,t){return n[e]=t,this}};return exports});