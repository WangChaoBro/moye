/*! 2015 Baidu Inc. All Rights Reserved */
define("ui/Tabs",["require","jquery","./lib","./Control","./painter"],function(require){var t=require("jquery"),e=require("./lib"),i=require("./Control"),n=i.extend({type:"Tabs",options:{activeIndex:0,item:"li",mode:"click",tabs:[]},init:function(e){this.$parent(e),this.activeIndex=+e.activeIndex||0,this.tabs=this.tabs&&this.tabs.length?this.tabs:t(this.main).data("tabs")||[],this._onSwitch=t.proxy(this._onSwitch,this)},initEvents:function(){t(this.main).on(this.mode,this.item,this._onSwitch)},repaint:require("./painter").createRepaint(i.prototype.repaint,{name:"tabs",paint:function(i,n){var r=t(this.main),s=this.helper;if(!this.helper.isInStage("INITED")||!r.data("dom-inited")){for(var a=[],o=e.browser.ie6,l=this.item,u=0,c=n.length;c>u;u++){var h=""+s.getPartClassName("item")+" "+(0===u?s.getPartClassName("item-first"):"");if(a[u]="<"+l+' class="'+h+'" data-index="'+u+'">'+n[u].title+"</"+l+">",o)a[u]+="<i></i>"}r.html(a.join(""))}}},{name:"activeIndex",paint:function(e,i){var n=this.helper.getPartClassName("active");t(this.item,this.main).each(function(e){if(e===i)t(this).addClass(n);else t(this).removeClass(n)})}}),add:function(t){var e=this.activeIndex,i=this.tabs.slice().concat(t);return this.tabs=null,this.activeIndex=null,this.set({tabs:i,activeIndex:e}),this},remove:function(t){var e=this.activeIndex;e=e===t?0:e>t?e-1:e;var i=this.tabs.slice();return i.splice(t,1),this.activeIndex=this.tabs=null,this.set({tabs:i,activeIndex:e}),this},select:function(t){return this.set("activeIndex",t),this},_onSwitch:function(e){var i=this.main,n=t(e.target).closest(this.item,i);if(n.is(this.item)){var r=this.activeIndex,s=n.data("index");if(r!==s){var a=new t.Event("change",{activeIndex:s});if(this.fire(a),!a.isDefaultPrevented()){var o=this.helper.getPartClassName("active"),l=t(this.item,i);l.eq(r).removeClass(o),l.eq(s).addClass(o),this.activeIndex=s}}}}});return n});